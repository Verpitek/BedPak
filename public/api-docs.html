<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            API Documentation - BedPak | Minecraft Bedrock Content REST API
        </title>
        <link rel="icon" type="image/webp" href="./logos/bedpak_mascot.webp" />
        <link rel="stylesheet" href="./styles/styles.css" />
        <link rel="stylesheet" href="./styles/apidocs.css" />

        <!-- SEO Meta Tags -->
        <meta
            name="description"
            content="BedPak REST API documentation. Learn how to programmatically upload, download, and manage Minecraft Bedrock content. Complete API reference with examples."
        />
        <meta
            name="keywords"
            content="BedPak API, Minecraft Bedrock API, REST API, content repository API, developer documentation"
        />
        <meta name="author" content="BedPak" />
        <meta name="robots" content="index, follow" />
        <meta name="theme-color" content="#C4A574" />
        <link rel="canonical" href="https://bedpak.com/api-docs.html" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://bedpak.com/api-docs.html" />
        <meta
            property="og:title"
            content="BedPak API Documentation - Minecraft Bedrock Content REST API"
        />
        <meta
            property="og:description"
            content="Complete REST API documentation for BedPak. Upload, download, and manage Minecraft Bedrock content programmatically."
        />
        <meta
            property="og:image"
            content="https://bedpak.com/logos/bedpak_mascot.webp"
        />
        <meta property="og:site_name" content="BedPak" />

        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="BedPak API Documentation" />
        <meta
            name="twitter:description"
            content="Complete REST API documentation for managing Minecraft Bedrock content programmatically."
        />
        <meta
            name="twitter:image"
            content="https://bedpak.com/logos/bedpak_mascot.webp"
        />

        <!-- Structured Data - TechArticle -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "TechArticle",
                "headline": "BedPak API Documentation",
                "description": "Complete REST API documentation for BedPak - upload, download, and manage Minecraft Bedrock content programmatically.",
                "author": {
                    "@type": "Organization",
                    "name": "BedPak"
                },
                "publisher": {
                    "@type": "Organization",
                    "name": "BedPak",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://bedpak.com/logos/bedpak_mascot.webp"
                    }
                },
                "mainEntityOfPage": {
                    "@type": "WebPage",
                    "@id": "https://bedpak.com/api-docs.html"
                },
                "articleSection": "Documentation",
                "keywords": [
                     "REST API",
                     "Minecraft Bedrock",
                      "content",
                     "content repository"
                 ]
            }
        </script>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <div class="header-logo">
                    <img src="./logos/bedpak_mascot.webp" alt="BedPak Logo" />
                 </div>
                 <h1>API Documentation</h1>
            </div>

            <div class="nav-links">
                <a href="/">Back to Repository</a>
                <a href="/terms-of-service.html">Terms of Service</a>
                <a href="/privacy-policy.html">Privacy Policy</a>
                <a href="/api-docs.html" class="active">API Docs</a>
            </div>

            <div class="content">
                <h2>Overview</h2>
                <p>
                    The BedPak API allows you to programmatically interact with
                    the Minecraft Bedrock add-on repository. You can list
                    packages, upload new add-ons, download files, manage
                    your packages, and access categories. Administrators can
                    manage users and tags.
                </p>

                <div class="note">
                    <div class="note-title">Base URL</div>
                    All API endpoints are relative to the base URL of your
                    BedPak instance. For local development, this is typically
                    <code>http://localhost:3000</code>
                </div>

                <div class="toc">
                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#authentication">Authentication</a></li>
                        <li><a href="#system">System Endpoints</a></li>
                        <li><a href="#users">User Endpoints</a></li>
                        <li><a href="#admin">Admin Endpoints</a></li>
                        <li><a href="#categories">Categories & Tags</a></li>
                        <li><a href="#packages">Package Endpoints</a></li>
                        <li><a href="#errors">Error Responses</a></li>
                        <li>
                            <a href="#file-format">File Format Requirements</a>
                        </li>
                    </ul>
                </div>

                <h2 id="authentication">Authentication</h2>
                <p>
                    BedPak uses JWT (JSON Web Token) authentication. After
                    logging in, include the token in the
                    <code>Authorization</code> header for authenticated
                    requests.
                </p>

                <h3>Register a New User</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/register</span>
                    </div>
                    <p class="endpoint-description">
                        Create a new user account.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                username
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>
                                Unique username (alphanumeric, underscores, hyphens, 3-32
                                chars)
                            </td>
                        </tr>
                        <tr>
                            <td>
                                email
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Valid email address</td>
                        </tr>
                        <tr>
                            <td>
                                password
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Min 8 chars, 1 number, 1 special character</td>
                        </tr>
                        <tr>
                            <td>
                                turnstileToken
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Cloudflare Turnstile CAPTCHA token</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "myuser",
    "email": "user@example.com",
    "password": "SecurePass123!",
    "turnstileToken": "token_from_captcha"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "User created successfully",
  "user": {
    "id": 1,
    "username": "myuser",
    "email": "user@example.com",
    "role": "user"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Login</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/login</span>
                    </div>
                    <p class="endpoint-description">
                        Authenticate and receive a JWT token.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                username
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Your username</td>
                        </tr>
                        <tr>
                            <td>
                                password
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Your password</td>
                        </tr>
                        <tr>
                            <td>
                                turnstileToken
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Cloudflare Turnstile CAPTCHA token</td>
                        </tr>
                        <tr>
                            <td>
                                totpCode
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>6-digit 2FA code (required if 2FA is enabled on account)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "myuser",
    "password": "SecurePass123!",
    "turnstileToken": "token_from_captcha"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response (without 2FA)</div>
                        <pre><code>{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIs...",
  "expiresIn": 604800,
  "user": {
    "id": 1,
    "username": "myuser",
    "email": "user@example.com",
    "role": "user"
  }
}</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">2FA Required Response</div>
                        <pre><code>{
  "error": "2FA required",
  "requiresTwoFactor": true
}</code></pre>
                        <p>If the account has 2FA enabled, retry the request with the <code>totpCode</code> parameter.</p>
                    </div>

                    <div class="note">
                        <div class="note-title">Token Expiration</div>
                        JWT tokens expire after 7 days (604800 seconds). Store the token securely
                        and include it in the Authorization header for
                        authenticated requests.
                    </div>

                    <div class="note">
                        <div class="note-title">Two-Factor Authentication</div>
                        If a user has 2FA enabled on their account, the login endpoint will return a 403 status with <code>requiresTwoFactor: true</code>. 
                        Retry the login request with the <code>totpCode</code> parameter containing a valid 6-digit code from the user's authenticator app.
                    </div>
                </div>

                <h3>Two-Factor Authentication Setup</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/2fa/setup</span>
                    </div>
                    <p class="endpoint-description">
                        Initiate 2FA setup. Returns a QR code and backup codes.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Header</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                Authorization
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Bearer token (JWT)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/2fa/setup \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "secret": "JBSWY3DPEBLW64TMMQ...",
  "qrCodeUrl": "data:image/png;base64,...",
  "backupCodes": ["ABC12DEF", "GHI34JKL", ...]
}</code></pre>
                    </div>
                </div>

                <h3>Enable Two-Factor Authentication</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/2fa/enable</span>
                    </div>
                    <p class="endpoint-description">
                        Verify and enable 2FA with a TOTP code.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                secret
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Secret from /auth/2fa/setup</td>
                        </tr>
                        <tr>
                            <td>
                                token
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>6-digit TOTP code from authenticator</td>
                        </tr>
                        <tr>
                            <td>
                                backupCodes
                                <span class="param-required">required</span>
                            </td>
                            <td>array</td>
                            <td>Backup codes from /auth/2fa/setup</td>
                        </tr>
                    </table>

                    <table class="param-table">
                        <tr>
                            <th>Header</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                Authorization
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Bearer token (JWT)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/2fa/enable \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "secret": "JBSWY3DPEBLW64TMMQ...",
    "token": "123456",
    "backupCodes": ["ABC12DEF", "GHI34JKL", ...]
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "2FA enabled successfully"
}</code></pre>
                    </div>
                </div>

                <h3>Disable Two-Factor Authentication</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/2fa/disable</span>
                    </div>
                    <p class="endpoint-description">
                        Disable 2FA with password and TOTP verification.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                password
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Your account password</td>
                        </tr>
                        <tr>
                            <td>
                                totpCode
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>6-digit TOTP code from authenticator</td>
                        </tr>
                    </table>

                    <table class="param-table">
                        <tr>
                            <th>Header</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                Authorization
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Bearer token (JWT)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/2fa/disable \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "password": "SecurePass123!",
    "totpCode": "123456"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "2FA disabled successfully"
}</code></pre>
                    </div>
                </div>

                <h3>Get 2FA Status</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/auth/2fa/status</span>
                    </div>
                    <p class="endpoint-description">
                        Check if 2FA is enabled for the current user.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Header</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                Authorization
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Bearer token (JWT)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl /auth/2fa/status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "twoFactorEnabled": true
}</code></pre>
                    </div>
                </div>

                <h3>Using Authentication</h3>
                <p>
                    For endpoints that require authentication, include the JWT
                    token in the <code>Authorization</code> header:
                </p>
                <div class="code-block">
                    <pre><code>Authorization: Bearer YOUR_JWT_TOKEN</code></pre>
                </div>

                <h2 id="system">System Endpoints</h2>

                <h3>Health Check</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/health</span>
                    </div>
                    <p class="endpoint-description">
                        Check if the API is running.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /health</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "status": "ok",
  "timestamp": "2025-12-28T12:00:00.000Z",
  "uptime": 3600.5
}</code></pre>
                    </div>
                </div>

                <h3>Get API Configuration</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/api/config</span>
                    </div>
                    <p class="endpoint-description">
                        Get API configuration for frontend integration.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /api/config</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "devMode": false
}</code></pre>
                    </div>
                </div>

                <h2 id="users">User Endpoints</h2>

                <h3>Get User by Username</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/user/:username</span>
                    </div>
                    <p class="endpoint-description">
                        Retrieve public user information by username.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /user/myuser</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "id": 1,
  "username": "myuser",
  "role": "user",
  "created_at": "2025-12-24T12:00:00.000Z"
}</code></pre>
                    </div>
                </div>

                <h3>Get User by ID</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/user/id/:userId</span>
                    </div>
                    <p class="endpoint-description">
                        Retrieve public user information by user ID.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /user/id/1</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "id": 1,
  "username": "myuser",
  "role": "user",
  "created_at": "2025-12-24T12:00:00.000Z"
}</code></pre>
                    </div>
                </div>

                <h2 id="admin">Admin Endpoints</h2>
                <p>
                    All admin endpoints require authentication with an admin account.
                    Include your JWT token in the Authorization header.
                </p>

                <h3>List All Users</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/admin/users</span>
                        <span class="auth-badge">Auth Required (Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Get a list of all users in the system. Admin only.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /admin/users \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "users": [
    {
      "id": 1,
      "username": "admin_user",
      "email": "admin@example.com",
      "role": "admin",
      "created_at": "2025-12-20T12:00:00.000Z"
    },
    {
      "id": 2,
      "username": "dev_user",
      "email": "dev@example.com",
      "role": "developer",
      "created_at": "2025-12-21T12:00:00.000Z"
    }
  ]
}</code></pre>
                    </div>
                </div>

                <h3>Update User Role</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span class="endpoint-path">/admin/users/:userId/role</span>
                        <span class="auth-badge">Auth Required (Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Change a user's role. Admin only. Cannot demote the last admin.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                role
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>One of: "user", "developer", "admin"</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X PUT /admin/users/2/role \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"role": "developer"}'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "User role updated successfully",
  "user": {
    "id": 2,
    "username": "dev_user",
    "role": "developer"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Edit User</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span class="endpoint-path">/admin/users/:userId</span>
                        <span class="auth-badge">Auth Required (Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Edit a user's profile (username, email, password). Admin only.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                username
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New username (must be unique)</td>
                        </tr>
                        <tr>
                            <td>
                                email
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New email (must be unique)</td>
                        </tr>
                        <tr>
                            <td>
                                password
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New password (must meet security requirements)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X PUT /admin/users/2 \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "new_username",
    "email": "newemail@example.com"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "User updated successfully",
  "user": {
    "id": 2,
    "username": "new_username",
    "email": "newemail@example.com",
    "role": "developer"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Delete User</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-delete">DELETE</span>
                        <span class="endpoint-path">/admin/users/:userId</span>
                        <span class="auth-badge">Auth Required (Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Delete a user from the system. Admin only. Cannot delete the last admin.
                    </p>

                    <div class="code-block">
                        <pre><code>curl -X DELETE /admin/users/2 \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "User deleted successfully"
}</code></pre>
                    </div>
                </div>

                <h3>Create Category/Tag</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/admin/tags</span>
                        <span class="auth-badge">Auth Required (Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Create a new category/tag. Admin only.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                name
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>Tag name (1-32 characters)</td>
                        </tr>
                        <tr>
                            <td>
                                slug
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>URL-friendly slug (lowercase, alphanumeric with hyphens, 1-32 chars, must be unique)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /admin/tags \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Building Tools",
    "slug": "building-tools"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Tag created successfully",
  "data": {
    "id": 1,
    "name": "Building Tools",
    "slug": "building-tools"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Delete Category/Tag</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-delete">DELETE</span>
                        <span class="endpoint-path">/admin/tags/:id</span>
                        <span class="auth-badge">Auth Required (Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Delete a category/tag. Admin only.
                    </p>

                    <div class="code-block">
                        <pre><code>curl -X DELETE /admin/tags/1 \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Tag deleted successfully"
}</code></pre>
                    </div>
                </div>

                <h2 id="categories">Categories & Tags</h2>

                <h3>List All Categories</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/categories</span>
                    </div>
                    <p class="endpoint-description">
                        Get all available categories/tags.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /categories</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Building Tools",
      "slug": "building-tools"
    },
    {
      "id": 2,
      "name": "Magic Mods",
      "slug": "magic-mods"
    }
  ]
}</code></pre>
                    </div>
                </div>

                <h3>Get All Tags (Legacy)</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/tags</span>
                    </div>
                    <p class="endpoint-description">
                        Get all tags. Supports optional popular filter.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Query Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                popular
                                <span class="param-optional">optional</span>
                            </td>
                            <td>boolean</td>
                            <td>If "true", return only popular tags</td>
                        </tr>
                        <tr>
                            <td>
                                limit
                                <span class="param-optional">optional</span>
                            </td>
                            <td>number</td>
                            <td>When popular=true, max results to return (default: 10, max: 50)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl "/tags?popular=true&limit=10"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Building Tools",
      "slug": "building-tools"
    }
  ]
}</code></pre>
                    </div>
                </div>

                <h3>Get Tag by Slug</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/tags/:slug</span>
                    </div>
                    <p class="endpoint-description">
                        Get a specific tag by its slug.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /tags/building-tools</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": {
    "id": 1,
    "name": "Building Tools",
    "slug": "building-tools"
  }
}</code></pre>
                    </div>
                </div>

                <h2 id="packages">Package Endpoints</h2>

                <h3>List All Packages</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages</span>
                    </div>
                    <p class="endpoint-description">
                        Retrieve a paginated list of all packages with optional category filtering.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Query Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                limit
                                <span class="param-optional">optional</span>
                            </td>
                            <td>number</td>
                            <td>Number of results per page (default: 20, max: 100)</td>
                        </tr>
                        <tr>
                            <td>
                                offset
                                <span class="param-optional">optional</span>
                            </td>
                            <td>number</td>
                            <td>Number of results to skip (default: 0)</td>
                        </tr>
                        <tr>
                            <td>
                                category
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>Filter by category slug</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl "/packages?limit=50&offset=0"
curl "/packages?category=building-tools"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "data": [
    {
      "id": 1,
      "name": "MyAddon",
      "description": "An awesome addon",
      "version": "1.0.0",
      "author_id": 1,
      "downloads": 42,
      "icon_url": "/icons/1.png",
      "created_at": "2025-12-24T12:00:00.000Z"
    }
  ],
  "limit": 50,
  "offset": 0,
  "total": 1,
  "filters": { "category": "building-tools" }
}</code></pre>
                    </div>
                </div>

                <h3>Get Package by Name</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/:name</span>
                    </div>
                    <p class="endpoint-description">
                        Retrieve basic details of a specific package by name.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /packages/MyAddon</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "data": {
    "id": 1,
    "name": "MyAddon",
    "description": "An awesome addon",
    "version": "1.0.0",
    "author_id": 1,
    "downloads": 42,
    "icon_url": "/icons/1.png",
    "created_at": "2025-12-24T12:00:00.000Z"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Get Full Package Data</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/:name/full</span>
                    </div>
                    <p class="endpoint-description">
                        Retrieve complete package details including category, metadata, and extended info.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /packages/MyAddon/full</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": {
    "id": 1,
    "name": "MyAddon",
    "description": "An awesome addon",
    "version": "1.0.0",
    "author_id": 1,
    "downloads": 42,
    "icon_url": "/icons/1.png",
    "long_description": "Detailed description of the addon...",
    "youtube_url": "https://youtube.com/watch?v=...",
    "discord_url": "https://discord.gg/...",
    "kofi_url": "https://ko-fi.com/...",
    "category": {
      "id": 1,
      "name": "Building Tools",
      "slug": "building-tools"
    },
    "created_at": "2025-12-24T12:00:00.000Z"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Get Packages by Author</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/author/:username</span>
                    </div>
                    <p class="endpoint-description">
                        Retrieve all packages uploaded by a specific user.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /packages/author/myuser</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "author": "myuser",
  "data": [
    {
      "id": 1,
      "name": "MyAddon",
      "description": "An awesome addon",
      "version": "1.0.0",
      "downloads": 42
    }
  ],
  "total": 1
}</code></pre>
                    </div>
                </div>

                <h3>Get Related Packages</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/:name/related</span>
                    </div>
                    <p class="endpoint-description">
                        Get packages in the same category as a given package.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Query Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                limit
                                <span class="param-optional">optional</span>
                            </td>
                            <td>number</td>
                            <td>Max results (default: 6, max: 10)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl "/packages/MyAddon/related?limit=6"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": [
    {
      "id": 2,
      "name": "AnotherAddon",
      "description": "Another awesome addon",
      "version": "1.0.0",
      "downloads": 35,
      "category": {
        "id": 1,
        "name": "Building Tools",
        "slug": "building-tools"
      }
    }
  ]
}</code></pre>
                    </div>
                </div>

                <h3>Download Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/:name/download</span>
                    </div>
                    <p class="endpoint-description">
                         Download the content file for a package. This
                         increments the download counter.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /packages/MyAddon/download -o MyAddon.mcaddon</code></pre>
                    </div>

                    <div class="note">
                        <div class="note-title">Response</div>
                         Returns the binary content file with appropriate
                         Content-Disposition headers.
                    </div>
                </div>

                <h3>Upload Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/packages</span>
                        <span class="auth-badge">Auth Required (Developer/Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Upload a new add-on package. Requires developer or admin role.
                        Supports both FormData (multipart) and JSON (base64) uploads.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                name
                                <span class="param-required">required</span>
                            </td>
                            <td>string</td>
                            <td>
                                Unique package name (letters, numbers,
                                underscores, hyphens, 1-64 chars)
                            </td>
                        </tr>
                        <tr>
                            <td>
                                file/fileBase64
                                <span class="param-required">required</span>
                            </td>
                            <td>File/string</td>
                            <td>Content file or base64-encoded content (max 200MB)</td>
                        </tr>
                        <tr>
                            <td>
                                description
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>Short package description</td>
                        </tr>
                        <tr>
                            <td>
                                longDescription
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>Detailed package description</td>
                        </tr>
                        <tr>
                            <td>
                                version
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>Version string in X.Y.Z format (e.g., "1.0.0")</td>
                        </tr>
                        <tr>
                            <td>
                                icon/iconBase64
                                <span class="param-optional">optional</span>
                            </td>
                            <td>File/string</td>
                            <td>
                                Icon image (PNG, JPG, WebP, GIF, SVG, max 2MB)
                            </td>
                        </tr>
                        <tr>
                            <td>
                                kofiUrl
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>
                                Ko-fi support URL (e.g.,
                                "https://ko-fi.com/username")
                            </td>
                        </tr>
                        <tr>
                            <td>
                                youtubeUrl
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>YouTube video URL for demonstration</td>
                        </tr>
                        <tr>
                            <td>
                                discordUrl
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>Discord community invite link</td>
                        </tr>
                        <tr>
                            <td>
                                category
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>Category slug (must be an existing category)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code># FormData Upload (Recommended)
curl -X POST /packages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "name=MyAddon" \
  -F "description=My awesome addon" \
  -F "longDescription=Detailed description..." \
  -F "version=1.0.0" \
  -F "category=building-tools" \
  -F "file=@my_addon.mcaddon" \
  -F "icon=@icon.png" \
  -F "kofiUrl=https://ko-fi.com/myuser" \
  -F "youtubeUrl=https://youtube.com/watch?v=..." \
  -F "discordUrl=https://discord.gg/..."

# JSON Base64 Upload
FILE_B64=$(base64 &lt; my_addon.mcaddon | tr -d '\n')
ICON_B64=$(base64 &lt; icon.png | tr -d '\n')

curl -X POST /packages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d "{
    \"name\": \"MyAddon\",
    \"description\": \"My awesome addon\",
    \"longDescription\": \"Detailed description...\",
    \"version\": \"1.0.0\",
    \"category\": \"building-tools\",
    \"fileBase64\": \"$FILE_B64\",
    \"iconBase64\": \"$ICON_B64\",
    \"kofiUrl\": \"https://ko-fi.com/myuser\",
    \"youtubeUrl\": \"https://youtube.com/watch?v=...\",
    \"discordUrl\": \"https://discord.gg/...\"
  }"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Package created successfully",
  "data": {
    "id": 1,
    "name": "MyAddon",
    "version": "1.0.0",
    "category": {
      "id": 1,
      "name": "Building Tools",
      "slug": "building-tools"
    }
  }
}</code></pre>
                    </div>

                    <div class="warning">
                        <div class="warning-title">File Requirements</div>
                         Only valid content files are accepted. The
                        file is verified by checking for ZIP magic bytes. SVG
                        icons are automatically sanitized to prevent XSS
                        attacks.
                    </div>
                </div>

                <h3>Update Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span class="endpoint-path">/packages/:id</span>
                        <span class="auth-badge">Auth Required (Owner/Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Update an existing package. Only the package owner or
                        admin can update. Supports partial updates.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>
                                name
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New package name</td>
                        </tr>
                        <tr>
                            <td>
                                description
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New short description</td>
                        </tr>
                        <tr>
                            <td>
                                longDescription
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string|null</td>
                            <td>New long description (set to null to remove)</td>
                        </tr>
                        <tr>
                            <td>
                                version
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New version string (X.Y.Z format)</td>
                        </tr>
                        <tr>
                            <td>
                                iconBase64
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New icon (base64-encoded)</td>
                        </tr>
                        <tr>
                            <td>
                                fileBase64
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string</td>
                            <td>New addon file (base64-encoded)</td>
                        </tr>
                        <tr>
                            <td>
                                kofiUrl
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string|null</td>
                            <td>Ko-fi URL (set to null to remove)</td>
                        </tr>
                        <tr>
                            <td>
                                youtubeUrl
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string|null</td>
                            <td>YouTube URL (set to null to remove)</td>
                        </tr>
                        <tr>
                            <td>
                                discordUrl
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string|null</td>
                            <td>Discord URL (set to null to remove)</td>
                        </tr>
                        <tr>
                            <td>
                                category
                                <span class="param-optional">optional</span>
                            </td>
                            <td>string|null</td>
                            <td>Category slug (set to null to clear category)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X PUT /packages/1 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "version": "1.1.0",
    "description": "Updated description",
    "longDescription": "More details...",
    "category": "magic-mods",
    "youtubeUrl": "https://youtube.com/watch?v=..."
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Package updated successfully",
  "data": {
    "id": 1,
    "name": "MyAddon",
    "version": "1.1.0",
    "category": {
      "id": 2,
      "name": "Magic Mods",
      "slug": "magic-mods"
    }
  }
}</code></pre>
                    </div>
                </div>

                <h3>Delete Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-delete">DELETE</span>
                        <span class="endpoint-path">/packages/:id</span>
                        <span class="auth-badge">Auth Required (Owner/Admin)</span>
                    </div>
                    <p class="endpoint-description">
                        Delete a package and its associated files. Only the
                        package owner or admin can delete.
                    </p>

                    <div class="code-block">
                        <pre><code>curl -X DELETE /packages/1 \
  -H "Authorization: Bearer YOUR_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Package deleted successfully"
}</code></pre>
                    </div>

                    <div class="warning">
                        <div class="warning-title">Warning</div>
                        Deletion is permanent. The package database record and
                        all associated files (addon and icon) will be removed.
                    </div>
                </div>

                <h2 id="errors">Error Responses</h2>
                <p>
                    All error responses follow a consistent format with an
                    <code>error</code> field describing the issue.
                </p>

                <div class="response-example">
                    <div class="response-label">Bad Request (400)</div>
                    <pre><code>{
   "error": "Invalid file format. Only content files are supported"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Unauthorized (401)</div>
                    <pre><code>{
  "error": "Unauthorized: Missing or invalid token"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Forbidden (403)</div>
                    <pre><code>{
  "error": "Forbidden: You do not own this package"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Conflict (409)</div>
                    <pre><code>{
  "error": "Package name already exists"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Not Found (404)</div>
                    <pre><code>{
  "error": "Package not found"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Rate Limited (429)</div>
                    <pre><code>{
  "error": "Too many requests. Please try again later."
}</code></pre>
                </div>

                <h2 id="file-format">File Format Requirements</h2>

                <h3>Content Files</h3>
                <p>
                    Only content files are accepted for upload.
                    These files must be valid ZIP archives (verified by checking
                    for ZIP magic bytes: <code>PK\x03\x04</code>).
                </p>

                <div class="note">
                    <div class="note-title">Valid Content Structure</div>
                    <pre><code>addon.mcaddon (ZIP)
 behavior_packs/
    my_pack/
        manifest.json
 resource_packs/
    my_pack/
        manifest.json
 (optional other files)</code></pre>
                </div>

                <h3>Icon Files</h3>
                <ul>
                    <li>
                        <strong>Supported formats:</strong> PNG, JPEG, WebP,
                        GIF, SVG
                    </li>
                    <li><strong>Maximum size:</strong> 2MB</li>
                    <li>
                        <strong>SVG sanitization:</strong> SVG files are
                        automatically sanitized to prevent XSS attacks
                    </li>
                </ul>

                <h3>File Size Limits</h3>
                <ul>
                    <li><strong>Addon files:</strong> Maximum 200MB</li>
                    <li><strong>Icon files:</strong> Maximum 2MB</li>
                </ul>

                <h2>Rate Limiting</h2>
                <p>API endpoints are rate limited to prevent abuse:</p>
                <ul>
                    <li><strong>General endpoints:</strong> 600 requests per minute per IP</li>
                    <li><strong>Login endpoint:</strong> 5 attempts per 15 minutes per IP</li>
                    <li><strong>Rate limit headers:</strong> X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset</li>
                </ul>

                <h2>Storage</h2>
                <p>Uploaded files are stored in the following structure:</p>
                <div class="code-block">
                    <pre><code>storage/
 addons/
    {packageId}-{packageName}/
        addon-{timestamp}.mcaddon
 icons/
     {packageId}.{extension}</code></pre>
                </div>

                <h2>User Roles</h2>
                <p>The system supports three user roles with different permissions:</p>
                <ul>
                    <li>
                        <strong>user:</strong> Can register and view packages, cannot upload
                    </li>
                    <li>
                        <strong>developer:</strong> Can upload, update, and delete their own packages
                    </li>
                    <li>
                        <strong>admin:</strong> Can manage users, tags, and all packages
                    </li>
                </ul>

                <h2>Tips</h2>
                <ul>
                    <li>Keep your JWT token secure (7-day expiration)</li>
                    <li>FormData uploads are preferred for files over base64 encoding</li>
                    <li>Package names must be unique across the repository</li>
                    <li>Only you (or admin) can update/delete your packages</li>
                    <li>
                        Download counter tracks popularity and is incremented on
                        each download
                    </li>
                    <li>Categories help organize and discover addons</li>
                    <li>Extended metadata (YouTube, Discord, Ko-fi links) enhance discoverability</li>
                </ul>
            </div>

            <div class="footer">
                <div class="nav-links">
                    <a href="/">Back to Repository</a>
                    <a href="/terms-of-service.html">Terms of Service</a>
                    <a href="/privacy-policy.html">Privacy Policy</a>
                    <a href="/api-docs.html" class="active">API Docs</a>
                    <a href="https://discord.gg/fyNQNrr7dC" target="_blank"
                        >Discord</a
                    >
                </div>
                <p>&copy; 2026 BedPak. All rights reserved.</p>
                <p>
                    BedPak is an independent service and is not affiliated with
                    Microsoft or Mojang Studios.
                </p>
            </div>
        </div>
    </body>
</html>
