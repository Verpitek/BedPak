<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>API Documentation - BedPak | Minecraft Bedrock Addons REST API</title>
        <link rel="icon" type="image/svg+xml" href="/logos/bedpak.svg" />
        <link rel="stylesheet" href="styles/styles.css">
        <link rel="stylesheet" href="styles/apidocs.css">
        
        <!-- SEO Meta Tags -->
        <meta name="description" content="BedPak REST API documentation. Learn how to programmatically upload, download, and manage Minecraft Bedrock addons (.mcaddon files). Complete API reference with examples." />
        <meta name="keywords" content="BedPak API, Minecraft Bedrock API, mcaddon API, REST API, addon repository API, developer documentation" />
        <meta name="author" content="BedPak" />
        <meta name="robots" content="index, follow" />
        <meta name="theme-color" content="#C4A574" />
        <link rel="canonical" href="https://bedpak.com/api-docs.html" />
        
        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://bedpak.com/api-docs.html" />
        <meta property="og:title" content="BedPak API Documentation - Minecraft Bedrock Addons REST API" />
        <meta property="og:description" content="Complete REST API documentation for BedPak. Upload, download, and manage Minecraft Bedrock addons programmatically." />
        <meta property="og:image" content="https://bedpak.com/logos/bedpak.svg" />
        <meta property="og:site_name" content="BedPak" />
        
        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="BedPak API Documentation" />
        <meta name="twitter:description" content="Complete REST API documentation for managing Minecraft Bedrock addons programmatically." />
        <meta name="twitter:image" content="https://bedpak.com/logos/bedpak.svg" />
        
        <!-- Structured Data - TechArticle -->
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "headline": "BedPak API Documentation",
            "description": "Complete REST API documentation for BedPak - upload, download, and manage Minecraft Bedrock addons (.mcaddon files) programmatically.",
            "author": {
                "@type": "Organization",
                "name": "BedPak"
            },
            "publisher": {
                "@type": "Organization",
                "name": "BedPak",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://bedpak.com/logos/bedpak.svg"
                }
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://bedpak.com/api-docs.html"
            },
            "articleSection": "Documentation",
            "keywords": ["REST API", "Minecraft Bedrock", "mcaddon", "addon repository"]
        }
        </script>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <div class="header-logo">
                    <img src="/logos/bedpak.svg" alt="BedPak Logo" />
                </div>
                <h1>API Documentation</h1>
            </div>

            <div class="nav-links">
                <a href="/packages.html">Back to Repository</a>
                <a href="/terms-of-service.html">Terms of Service</a>
                <a href="/privacy-policy.html">Privacy Policy</a>
                <a href="/api-docs.html" class="active">API Docs</a>
            </div>

            <div class="content">
                <h2>Overview</h2>
                <p>
                    The BedPak API allows you to programmatically interact with the
                    Minecraft Bedrock add-on repository. You can list packages,
                    upload new add-ons, download files, and manage your packages.
                </p>

                <div class="note">
                    <div class="note-title">Base URL</div>
                    All API endpoints are relative to the base URL of your BedPak instance.
                    For local development, this is typically <code>http://localhost:3000</code>
                </div>

                <div class="toc">
                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#authentication">Authentication</a></li>
                        <li><a href="#users">User Endpoints</a></li>
                        <li><a href="#packages">Package Endpoints</a></li>
                        <li><a href="#errors">Error Responses</a></li>
                        <li><a href="#file-format">File Format Requirements</a></li>
                    </ul>
                </div>

                <h2 id="authentication">Authentication</h2>
                <p>
                    BedPak uses JWT (JSON Web Token) authentication. After logging in,
                    include the token in the <code>Authorization</code> header for
                    authenticated requests.
                </p>

                <h3>Register a New User</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/register</span>
                    </div>
                    <p class="endpoint-description">Create a new user account.</p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>username <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Unique username (alphanumeric, underscores, 3-32 chars)</td>
                        </tr>
                        <tr>
                            <td>email <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Valid email address</td>
                        </tr>
                        <tr>
                            <td>password <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Min 8 chars, 1 number, 1 special character</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "myuser",
    "email": "user@example.com",
    "password": "SecurePass123!"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "User registered successfully",
  "user": {
    "id": 1,
    "username": "myuser"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Login</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/auth/login</span>
                    </div>
                    <p class="endpoint-description">Authenticate and receive a JWT token.</p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>username <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Your username</td>
                        </tr>
                        <tr>
                            <td>password <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Your password</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X POST /auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "myuser",
    "password": "SecurePass123!"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIs...",
  "user": {
    "id": 1,
    "username": "myuser"
  }
}</code></pre>
                    </div>

                    <div class="note">
                        <div class="note-title">Token Expiration</div>
                        JWT tokens expire after 7 days. Store the token securely and
                        include it in the Authorization header for authenticated requests.
                    </div>
                </div>

                <h3>Using Authentication</h3>
                <p>
                    For endpoints that require authentication, include the JWT token
                    in the <code>Authorization</code> header:
                </p>
                <div class="code-block">
                    <pre><code>Authorization: Bearer YOUR_JWT_TOKEN</code></pre>
                </div>

                <h2 id="users">User Endpoints</h2>

                <h3>Get User by Username</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/user/{username}</span>
                    </div>
                    <p class="endpoint-description">Retrieve public user information by username.</p>

                    <div class="code-block">
                        <pre><code>curl /user/myuser</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "id": 1,
  "username": "myuser"
}</code></pre>
                    </div>
                </div>

                <h3>Get User by ID</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/user/id/{id}</span>
                    </div>
                    <p class="endpoint-description">Retrieve public user information by user ID.</p>

                    <div class="code-block">
                        <pre><code>curl /user/id/1</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "id": 1,
  "username": "myuser"
}</code></pre>
                    </div>
                </div>

                <h2 id="packages">Package Endpoints</h2>

                <h3>List All Packages</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages</span>
                    </div>
                    <p class="endpoint-description">Retrieve a paginated list of all packages.</p>

                    <table class="param-table">
                        <tr>
                            <th>Query Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>limit <span class="param-optional">optional</span></td>
                            <td>number</td>
                            <td>Number of results per page (default: 20)</td>
                        </tr>
                        <tr>
                            <td>offset <span class="param-optional">optional</span></td>
                            <td>number</td>
                            <td>Number of results to skip (default: 0)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl "/packages?limit=50&offset=0"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "MyAddon",
      "description": "An awesome addon",
      "version": "1.0.0",
      "author_id": 1,
      "downloads": 42,
      "icon_url": "/icons/1.png",
      "kofi_url": "https://ko-fi.com/myuser",
      "created_at": "2025-12-24T12:00:00.000Z"
    }
  ],
  "pagination": {
    "limit": 50,
    "offset": 0,
    "total": 1
  }
}</code></pre>
                    </div>
                </div>

                <h3>Get Package by Name</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/{name}</span>
                    </div>
                    <p class="endpoint-description">Retrieve details of a specific package by name.</p>

                    <div class="code-block">
                        <pre><code>curl /packages/MyAddon</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": {
    "id": 1,
    "name": "MyAddon",
    "description": "An awesome addon",
    "version": "1.0.0",
    "author_id": 1,
    "downloads": 42,
    "icon_url": "/icons/1.png",
    "kofi_url": "https://ko-fi.com/myuser",
    "created_at": "2025-12-24T12:00:00.000Z"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Get Packages by Author</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/author/{username}</span>
                    </div>
                    <p class="endpoint-description">Retrieve all packages uploaded by a specific user.</p>

                    <div class="code-block">
                        <pre><code>curl /packages/author/myuser</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "MyAddon",
      "description": "An awesome addon",
      "version": "1.0.0",
      "downloads": 42
    }
  ]
}</code></pre>
                    </div>
                </div>

                <h3>Download Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span class="endpoint-path">/packages/{name}/download</span>
                    </div>
                    <p class="endpoint-description">
                        Download the .mcaddon file for a package. This increments the download counter.
                    </p>

                    <div class="code-block">
                        <pre><code>curl /packages/MyAddon/download -o MyAddon.mcaddon</code></pre>
                    </div>

                    <div class="note">
                        <div class="note-title">Response</div>
                        Returns the binary .mcaddon file with appropriate Content-Disposition headers.
                    </div>
                </div>

                <h3>Upload Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span class="endpoint-path">/packages</span>
                        <span class="auth-badge">Auth Required</span>
                    </div>
                    <p class="endpoint-description">Upload a new add-on package.</p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>name <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Unique package name (letters, numbers, underscores, hyphens, 1-64 chars)</td>
                        </tr>
                        <tr>
                            <td>fileBase64 <span class="param-required">required</span></td>
                            <td>string</td>
                            <td>Base64-encoded .mcaddon file (max 200MB)</td>
                        </tr>
                        <tr>
                            <td>description <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>Package description</td>
                        </tr>
                        <tr>
                            <td>version <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>Version string (e.g., "1.0.0")</td>
                        </tr>
                        <tr>
                            <td>iconBase64 <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>Base64-encoded icon image (PNG, JPG, WebP, GIF, SVG, max 2MB)</td>
                        </tr>
                        <tr>
                            <td>kofiUrl <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>Ko-fi support URL (e.g., "https://ko-fi.com/username")</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code># Encode your files to base64
FILE_B64=$(base64 &lt; my_addon.mcaddon | tr -d '\n')
ICON_B64=$(base64 &lt; icon.png | tr -d '\n')

# Upload the package
curl -X POST /packages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d "{
    \"name\": \"MyAddon\",
    \"description\": \"My awesome addon\",
    \"version\": \"1.0.0\",
    \"iconBase64\": \"$ICON_B64\",
    \"fileBase64\": \"$FILE_B64\",
    \"kofiUrl\": \"https://ko-fi.com/myuser\"
  }"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Package uploaded successfully",
  "package": {
    "id": 1,
    "name": "MyAddon",
    "version": "1.0.0"
  }
}</code></pre>
                    </div>

                    <div class="warning">
                        <div class="warning-title">File Requirements</div>
                        Only valid .mcaddon files (ZIP format) are accepted. The file is verified
                        by checking for ZIP magic bytes. SVG icons are automatically sanitized
                        to prevent XSS attacks.
                    </div>
                </div>

                <h3>Update Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span class="endpoint-path">/packages/{id}</span>
                        <span class="auth-badge">Auth Required</span>
                    </div>
                    <p class="endpoint-description">
                        Update an existing package. Only the package owner or admin can update.
                    </p>

                    <table class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>name <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>New package name</td>
                        </tr>
                        <tr>
                            <td>description <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>New description</td>
                        </tr>
                        <tr>
                            <td>version <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>New version string</td>
                        </tr>
                        <tr>
                            <td>iconBase64 <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>New icon (base64-encoded)</td>
                        </tr>
                        <tr>
                            <td>fileBase64 <span class="param-optional">optional</span></td>
                            <td>string</td>
                            <td>New addon file (base64-encoded)</td>
                        </tr>
                        <tr>
                            <td>kofiUrl <span class="param-optional">optional</span></td>
                            <td>string|null</td>
                            <td>Ko-fi URL (set to null to remove)</td>
                        </tr>
                    </table>

                    <div class="code-block">
                        <pre><code>curl -X PUT /packages/1 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "version": "1.1.0",
    "description": "Updated description"
  }'</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Package updated successfully",
  "package": {
    "id": 1,
    "name": "MyAddon",
    "version": "1.1.0"
  }
}</code></pre>
                    </div>
                </div>

                <h3>Delete Package</h3>
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method-badge method-delete">DELETE</span>
                        <span class="endpoint-path">/packages/{id}</span>
                        <span class="auth-badge">Auth Required</span>
                    </div>
                    <p class="endpoint-description">
                        Delete a package and its associated files. Only the package owner or admin can delete.
                    </p>

                    <div class="code-block">
                        <pre><code>curl -X DELETE /packages/1 \
  -H "Authorization: Bearer YOUR_TOKEN"</code></pre>
                    </div>

                    <div class="response-example">
                        <div class="response-label">Success Response</div>
                        <pre><code>{
  "success": true,
  "message": "Package deleted successfully"
}</code></pre>
                    </div>

                    <div class="warning">
                        <div class="warning-title">Warning</div>
                        Deletion is permanent. The package database record and all associated
                        files (addon and icon) will be removed.
                    </div>
                </div>

                <h2 id="errors">Error Responses</h2>
                <p>
                    All error responses follow a consistent format with an
                    <code>error</code> field describing the issue.
                </p>

                <div class="response-example">
                    <div class="response-label">Invalid File Format</div>
                    <pre><code>{
  "error": "Invalid file format. Only .mcaddon files (ZIP format) are supported"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Unauthorized</div>
                    <pre><code>{
  "error": "Unauthorized: Missing or invalid token"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Duplicate Package Name</div>
                    <pre><code>{
  "error": "Package name already exists"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Not Found</div>
                    <pre><code>{
  "error": "Package not found"
}</code></pre>
                </div>

                <div class="response-example">
                    <div class="response-label">Forbidden</div>
                    <pre><code>{
  "error": "Forbidden: You do not own this package"
}</code></pre>
                </div>

                <h2 id="file-format">File Format Requirements</h2>

                <h3>.mcaddon Files</h3>
                <p>
                    Only <code>.mcaddon</code> files are accepted for upload. These files must be
                    valid ZIP archives (verified by checking for ZIP magic bytes: <code>PK\x03\x04</code>).
                </p>

                <div class="note">
                    <div class="note-title">Valid .mcaddon Structure</div>
                    <pre><code>addon.mcaddon (ZIP)
├── behavior_packs/
│   └── my_pack/
│       └── manifest.json
├── resource_packs/
│   └── my_pack/
│       └── manifest.json
└── (optional other files)</code></pre>
                </div>

                <h3>Icon Files</h3>
                <ul>
                    <li><strong>Supported formats:</strong> PNG, JPEG, WebP, GIF, SVG</li>
                    <li><strong>Maximum size:</strong> 2MB</li>
                    <li><strong>SVG sanitization:</strong> SVG files are automatically sanitized to prevent XSS attacks</li>
                </ul>

                <h3>File Size Limits</h3>
                <ul>
                    <li><strong>Addon files:</strong> Maximum 200MB</li>
                    <li><strong>Icon files:</strong> Maximum 2MB</li>
                </ul>

                <h2>Storage</h2>
                <p>Uploaded files are stored in the following structure:</p>
                <div class="code-block">
                    <pre><code>storage/
├── addons/
│   └── {packageId}-{packageName}/
│       └── addon-{timestamp}.mcaddon
└── icons/
    └── {packageId}.{extension}</code></pre>
                </div>

                <h2>Tips</h2>
                <ul>
                    <li>Keep your JWT token secure (7-day expiration)</li>
                    <li>Use base64 encoding for file uploads</li>
                    <li>Package names must be unique across the repository</li>
                    <li>Only you (or admin) can update/delete your packages</li>
                    <li>Download counter tracks popularity and is incremented on each download</li>
                </ul>
            </div>

            <div class="footer">
                <div class="nav-links">
                    <a href="/packages.html">Back to Repository</a>
                    <a href="/terms-of-service.html">Terms of Service</a>
                    <a href="/privacy-policy.html">Privacy Policy</a>
                    <a href="/api-docs.html" class="active">API Docs</a>
                    <a href="https://discord.gg/fyNQNrr7dC" target="_blank">Discord</a>
                </div>
                <p>&copy; 2025 BedPak. All rights reserved.</p>
                <p>
                    BedPak is an independent service and is not affiliated with
                    Microsoft or Mojang Studios.
                </p>
            </div>
        </div>
    </body>
</html>
